{% extends "donacion/base.html" %}
{% load staticfiles %}
{% load mathfilters %}
{% load bootstrap4 %}


{% block tittle %} Modulo de Donaciones {% endblock %}
{% block static %}
<style  >
  #taller {
    animation-name: animacionTaller;
    animation-duration: 1000ms;
    animation-iteration-count: 1;
    position: relative;
   }
   
   @keyframes animacionTaller{
    from{
        opacity: 0;
    }
    to{
        opacity: 1;
    }
   }

.colores{
	background-color: ;
}
  #alerta {
    animation-name: animacionTaller;
    animation-duration: 1000ms;
    animation-iteration-count: infinite;
    position: relative;
   }
   
   @keyframes animacionTaller{
    from{
        opacity: 0;
    }
    25%{
    	opacity: .25;
    }
    50%{
    	opacity: .5;
    }
    75%{
    	opacity: .75;
    }
    to{
        opacity: 1;
    }
   }
</style>


{% endblock%}

{% block content %}


{% if perms.donacion.add_producto %}

<div	>
	
	


<div class="card border rounded" id="taller">
	<div class="row ">
    <div class="col-12 text-center">
        <b> <h3 class="border rounded text-light p-2 " id="content" >MODULO DE DONACIONES &nbsp;{{date}} </h3></b>
       
    </div>
 </div>
                                 
        
        <div class="card-body">


    
  <div class="container-fluid text-center text-md-center">
    			
						     			    
						
    			
  
    {% if perms.donacion.edit_donacion %}

    		  	<div class=" row ">
    		  	<div class="col-lg-4  col-md-12 col-sm-12 text-md-center  ">
						<table class="  table table-striped table-bordered  ">
					  <thead>
					    <tr>
					      <th colspan="2">Tipos de Producto</th>
					      <th >Total por tipo</th>
					    </tr>
					  </thead>
					  <tbody>
					  	 <tr>
					  	 	<td	><i class="fas fa-utensils"> </i></td>
					      <td>ALIMENTOS</td>
					      <td>
					      	{% if cantA.suma is None %}
						      	0
						      {% else %}
						      	{{cantA.suma}}
					      	{% endif %}
					      </td>
					    </tr>

					    <tr>
					    	<td	><i class="fas fa-gamepad"></i> </td>
					      <td>JUGUETE</td>
					      <td>
					      	{% if cantJ.suma is None %}
						      	0
						      {% else %}
						      	{{cantJ.suma}}
					      	{% endif %}
					      </td>
					    </tr>

					    <tr>
					    	<td	><i class="fas fa-first-aid"> </i></td>
					      <td>MEDICINA</td>
					      <td>
					      	{% if cantM.suma is None %}
						      	0
						      {% else %}
						      	{{cantM.suma}}
					      	{% endif %}

					      </td>
					    </tr>
					    <tr>
					     <td	> <i class="fas fa-tshirt"> </i></td>
					      <td>ROPA</td>
					      <td>
					      	{% if cantR.suma is None %}
						      	0
						      {% else %}
						      	{{cantR.suma}}
					      	{% endif %}

					      </td>
					    </tr>
					    
					   
					  </tbody>
					</table>
				</div>
				<div class="col-lg-4 col-md-0 col-sm-0"></div>
				
					
				
    		  	<div class="col-lg-4  col-md-12 col-sm-12  text-lg-right text-md-center  "  >
    		  		<div class="card">
    		  			<div class="card-header">
    		  				<h5>Total en Donaciones</h5>
    		  			</div>
    		  			
    		  		
    		  	<div class="card-body">
    		  	
    		  	 {% if cant.suma is None %} 
    		  	 	<h1>0</h1>
    		  	 {% else  %}
	    		  	 
	    		  	 <h2 class=" text-danger ">{{ cant.suma  }} </h2>
	    		  	 
	    		  	

    		  	 {% endif %}
    		  	 </div>
    		  	</div>
    		  	</div>
    		  	
		</div>  	
	
                    {% else %}
                    {% endif %}

       </div>
</div>
</div>

                

  <!-- code here to list the books -->
  <br>
  {% if perms.donacion.add_donacion %}

	{% else %}
  						{% if m  %}


						    				<div class=" alert alert-danger bg-danger col-lg-12 col-md-12 col-sm-12  text-center" id="alerta">
						    							<button type="button" class="close text-light" data-dismiss="alert">&times;</button>
													<b class=" "><a class="btn btn-alert btn-block text-light" href="{%  url 'donacion:descompuesto' %}"><h5 class="text-uppercase"> {{ m }}<i class="btn btn-alert  fas fa-exclamation-triangle">  </i></h5></a></b>
													</div>
							 				{% else %}
												
											{% endif %}
												
											{% endif %}





  					



                    <div class="row">                 
                       			 <div class="col-4 text-left text-light">    
                                    <a data-toggle="tooltip" data-placement="top" title="Agregar Donacion" onclick="return abrir_modal('{% url 'donacion:donacion' %}','REGISTRO DE DONACION')"  class="btn btn-platzi colores">
                                <span class="fas fa-plus-circle"> Donacion</span>
                            </a>  
                        			</div>

                        <div class="col-4 text-center ">
                           
                              <a data-toggle="tooltip" data-placement="top" title="Ingresos  por Categoria"  href="{% url 'donacion:chart_data2'%}" class="btn btn-platzi">
                                    <span class="fas fa-chart-bar"> </span>
                                </a>  
                        </div> 
                         <div class="col-4 text-right">    
                                               <a  href="{% url 'donacion:stock_total' %}" class="btn btn-platzi ">
                                <span class="fas fa-boxes"> &nbsp;Stock</span></a>
                        </div>   
                                                
                    </div>
                    <br>


<div class="row  ">
                    	<div class="col-lg-12 col-md-12 col-sm-12">
                        <table id="tabla" class="table  table-hover table-rounded    table-responsive-lg table-responsive-md table-responsive-sm" cellspacing="0" width="100%">
		                            <thead class="text-center"><div class="row justify-content-center"><h3>LISTADO DE DONACIONES REGISTRADAS</h3></div>
		                                <tr class="">
		                                    
		                                    <th class="text-center">FECHA DONACION</th>
		                                    <th class="text-center ">NOMBRES</th> 
		                                    <th class="text-center "  width="20%">APELLIDOS</th> 
		                                    <th class="text-center " width="20%">MOVIL</th> 
		                                    
		                                    
		                                    <th class="text-center " width="20%" >ACCIONES</th>                                 
		                                </tr>
		                            </thead>
                            	<tbody class="text-dark">
			                            {% for donacion in donaciones %}
			                                <tr class="">
			                                	<td class="text-center">
													
														<strong>{{ donacion.created }}</strong>
													
												</td>
			                                    <td class="text-center"><strong>{{ donacion.persona.nombres }}</strong></td>
												<td class="text-center">
													
														<strong>{{ donacion.persona.apellido_paterno }} {{ donacion.persona.apellido_materno }}</strong>
													
												</td>
												<td class="text-center">
													
														<strong>{{ donacion.persona.celular }}</strong>
													
												</td>
			                                   
			                                    
												
												<td class="text-center">
                                                                <a data-toggle="tooltip" data-placement="top" title="Detalles de Donacion" href="{% url 'donacion:edit' donacion.id %}" class="btn ink-reaction btn-floating-action btn-secondary"><i class="fas fa-eye"></i> </a>
                                                                
                                                                 <a data-toggle="tooltip" data-placement="top" title="Agregar Producto a Donacion*" href="{% url 'donacion:producto' donacion.id %}" class="btn btn-primary "><span class="fas fa-parking "></span> </a>
                                                                
                                                                <!--<a data-toggle="tooltip" data-placement="top" title="Imrimir Agradecimientos" href="{% url 'donacion:reporte_donacion_pdf' donacion.id %}" class="btn ink-reaction btn-floating-action btn-info"><i class="fas fa-print"></i> </a>  -->
                                                                {% if perms.persona %}
                                                                <a data-toggle="tooltip" data-placement="top" title="Imrimir Donacion" href="{% url 'donacion:show_donacion' donacion.id %}" class="btn ink-reaction btn-floating-action btn-info"><i class="fas fa-print"></i> </a>
                                                                {% endif %}

                                                </td>

                                            </tr>
                                            
			                            {% endfor %}
                           	 	</tbody>
                             </table>
                         </div>
                    </div>


</div>
<div id="popup"></div>
    


{% else %}
<br>

		    	<div class="row justify-content-center">
								<h1 class="text-danger">Si estas aqui es un error. Reportalo con la administracion.	</h1>
				</div>




{% endif %}




{% endblock %}


{% block footer %}

                  

{% endblock %}


                   



	{% block extra_js %}	




		<script>
var modal;
function abrir_modal(url, titulo)
{
    modal = $('#popup').dialog(
    {
        title: titulo,
        modal: true,
        width: 500,
        resizable: false
    }).dialog('open').load(url)
}

function cerrar_modal()
{
    modal.dialog("close");
}

</script>

   <script type="text/javascript" src="{% static 'js/jquery.js' %}" charset="UTF-8"></script>

    <script src="{% static 'js/bootstrap.min.js' %}" charset="UTF-8"></script>

    <script type="text/javascript" src="{% static 'js/jquery-ui.js' %}"></script>
  <link rel="stylesheet" type="text/css" href="{% static 'css/jquery.dataTables.min.css'  %}"/>
        <script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" crossorigin="anonymous" />



	

	
			<script >
			$(document).ready(function()
					{
					    var table = $('#tabla').dataTable( {
					        "language": {
					        	url: "/static/localizacion/es_ES.json"
					        }
				    } );
			});
			</script>
	{% endblock %}